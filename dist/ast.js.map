{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/compiler-esnext.js","src/index.js","src/parser-esnext.js"],"names":[],"mappings":"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","file":"ast.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default compile;\n\nclass Compiler {\n\n\tcompile (node) {\n\n\t\t// console.log('compile()', node);\n\t\tvar context = this.precompile(node);\n\n\t\treturn {\n\t\t\t/* jshint evil:true */\n\t\t\tcallable: new Function('context', context.code),\n\t\t\tbindingPaths: context.bindings\n\t\t};\n\t}\n\n\tprecompile (node) {\n\t\tvar context = {\n\t\t\tcode: 'return ',\n\t\t\tbindings: []\n\t\t};\n\n\t\tthis.buffer = '';\n\n\t\tthis.walk(node, context);\n\n\t\tconsole.log(context.code);\n\t\tconsole.log(context.bindings);\n\n\t\treturn context;\n\t}\n\n\twalk (node, context) {\n\t\t// console.log('walk()', node);\n\t\tif( typeof this[node.type] !== 'function' ) {\n\t\t\tconsole.log(node);\n\t\t\tthrow new Error(this[node.type]);\n\t\t}\n\t\tthis[node.type](node, context);\n\t}\n\n\t'Binary' (node, context) {\n\t\tthis.walk(node.left, context);\n\t\tcontext.code += node.operator;\n\t\tthis.walk(node.right, context);\n\t}\n\n\t'Callable' (node, context) {\n\t\tvar argsLength = node.args.length - 1;\n\t\tthis.walk(node.callable, context);\n\n\t\tlet _members = this.members;\n\t\tthis.members = null;\n\t\tcontext.code += '(';\n\t\tnode.args.forEach((node, i) => {\n\t\t\tthis.walk(node, context);\n\t\t\tcontext.code += argsLength !== i ? ',' : '';\n\t\t});\n\t\tcontext.code += ')';\n\t\tthis.members = _members;\n\t}\n\n\t'Conditional' (node, context) {\n\t\tthis.walk(node.test, context);\n\t\tcontext.code += '?';\n\t\tthis.walk(node.consequent, context);\n\t\tcontext.code += ':';\n\t\tthis.walk(node.alternate, context);\n\t}\n\n\t'Number' (node, context) {\n\t\tcontext.code += node.raw;\n\t}\n\n\t'Nested' (node, context) {\n\t\tcontext.code += '(';\n\t\tthis.walk(node.value, context);\n\t\tcontext.code += ')';\n\t}\n\n\t'String'(node, context) {\n\t\tcontext.code += node.raw;\n\t}\n\n\t'Logical' (node, context) {\n\t\tthis.walk(node.left, context);\n\t\tcontext.code += node.operator;\n\t\tthis.walk(node.right, context);\n\t}\n\n\t'Identifier' (node, context) {\n\t\tif( !this.members ) {\n\t\t\tcontext.code += 'context.';\n\t\t}\n\n\t\tcontext.code += node.value;\n\n\t\tif(!this.members){\n\t\t\tcontext.bindings.push(node.value);\n\t\t} else {\n\t\t\tthis.members.push(node.value);\n\t\t}\n\t}\n\n\t'Assignment' (node, context) {\n\t\tthis.walk(node.left, context);\n\t\tcontext.code += '=';\n\t\tthis.walk(node.right, context);\n\t}\n\n\t'Member' (node, context) {\n\t\tlet members = this.members;\n\t\tif(!members) {\n\t\t\t// console.log('Go');\n\t\t\tthis.members = [];\n\t\t\tcontext.code += 'context.';\n\t\t}\n\t\tthis.walk(node.object, context);\n\t\tif( node.computed ) {\n\t\t\tcontext.code += '[';\n\t\t\tlet _members = this.members;\n\t\t\tthis.members = null;\n\t\t\tthis.walk(node.property, context);\n\t\t\tthis.members = _members;\n\t\t\tcontext.code += ']';\n\t\t} else {\n\t\t\tcontext.code += '.';\n\t\t\tthis.walk(node.property, context);\n\t\t}\n\t\tif(!members) {\n\t\t\t// console.log('End');\n\t\t\tcontext.bindings.push(this.members.join('.'));\n\t\t\tthis.members = null;\n\t\t}\n\t}\n}\n\nconst compiler = new Compiler();\n\nfunction compile (node) {\n\n\treturn compiler.compile(node);\n}\n","(function (context){\n\n\tlet Rocky = context.Rocky = context.Rocky || {};\n\n\tRocky.compile = require('./compiler-esnext');\n\tRocky.parse = require('./parser-esnext');\n})(window);\n","export default parse;\n\nconst BINARY_OPERATORS = {\n\t'||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\n\t'==': 6, '!=': 6, '===': 6, '!==': 6,\n\t'<': 7,  '>': 7,  '<=': 7,  '>=': 7,\n\t'<<':8,  '>>': 8, '>>>': 8,\n\t'+': 9, '-': 9,\n\t'*': 10, '/': 10, '%': 10\n};\n\nconst LITERALS = {\n\t'true': true,\n\t'false': false,\n\t'null': null\n\t// 'undefined': undefined\n};\n\nconst IS_NUMBER_START = '-.0123456789';\nconst IS_NUMBER = '0123456789.e';\n\nclass Parser {\n\n\t/**\n\t * Parse given expression\n\t *\n\t * @return {Object} Tokens\n\t */\n\tparse ( expression ) {\n\n\t\tthis.text = expression;\n\t\tthis.length = expression.length;\n\n\t\t// Parse index\n\t\tthis.index = -1;\n\t\t// Current character\n\t\tthis.current = '';\n\n\t\tthis.read();\n\n\t\treturn this.parseExpression();\n\t}\n\n\t// -- Private method -- //\n\tread () {\n\t\tthis.index += 1;\n\n\t\tif(this.index >= this.length) {\n\t\t\tthis.current = '';\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.current = this.text[this.index];\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Peak ahead.(or behind)\n\t * Does not move this.index\n\t * @return\n\t */\n\tpeek ( steps = 1 ) {\n\t\treturn this.text[this.index + steps] || '';\n\t}\n\n\t/**\n\t * Keep reading till we find a usable char\n\t */\n\tmoveon () {\n\t\twhile( this.is(\" \\t\\n\") && this.read() ) {}\n\t}\n\n\t/**\n\t *\n\t */\n\tskip ( steps ) {\n\t\t// -1 cause read does +1\n\t\tthis.index += steps - 1;\n\n\t\treturn this.read();\n\t}\n\n\t/**\n\t * Check if char is in given string\n\t */\n\tis ( chars ) {\n\t\treturn this.current && chars.indexOf(this.current) !== -1;\n\t}\n\n\t// Parsers\n\tparseToken () {\n\t\tif( !this.current ) {\n\t\t\tthrow new ParseError('Unexpected end');\n\t\t}\n\n\t\tif( this.is(IS_NUMBER_START) && this.peek() !== '-' ) {\n\t\t\treturn this.parseNumber();\n\t\t}\n\n\t\tif( this.is('\"\\'') ) {\n\t\t\treturn this.parseString();\n\t\t}\n\n\t\tif( this.is('(') ) {\n\t\t\treturn this.parseNested();\n\t\t}\n\n\t\tif( this.is('!-+') ) {\n\t\t\treturn this.parseUnaryExpression();\n\t\t}\n\n\t\tif( this.is('[') ) {\n\t\t\treturn this.parseArray();\n\t\t}\n\n\t\tif( this.is('{') ) {\n\t\t\treturn this.parseObject();\n\t\t}\n\n\t\tif( this.isIdentifierStart() ) {\n\t\t\treturn this.parseVariable();\n\t\t}\n\n\t\tthrow new ParseError('Could not parse');\n\t}\n\tparseExpression () {\n\t\tlet left = this.parseToken();\n\t\tlet operator = this.parseOperator();\n\n\t\tif( !this.current ) {\n\t\t\treturn left;\n\t\t}\n\n\t\tif( operator ) {\n\t\t\treturn this.parseBinaryExpression(left, operator);\n\t\t}\n\n\t\tif( this.is('?') ) {\n\t\t\treturn this.parseConditionalExpression(left);\n\t\t}\n\n\t\tif( this.is('=') ) {\n\t\t\treturn this.parseAssignmentExpression(left);\n\t\t}\n\n\t\treturn left;\n\t\t// throw new ParseError('Errororrr '+this.current);\n\t}\n\t/**\n\t *\n\t */\n\tparseArray () {\n\t\tvar properties = [];\n\t\tvar node;\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\t/* jshint boss: true */\n\t\twhile( node = this.parseToken() ) {\n\n\t\t\tproperties.push(node);\n\n\t\t\tif( this.is(',') ) {\n\t\t\t\tthis.read();\n\t\t\t\tthis.moveon();\n\t\t\t}\n\t\t\t// End of callable args\n\t\t\telse if( this.is(']') ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif( !this.is(']') ) {\n\t\t\tthrow new ParseError('Unexpected callable end');\n\t\t}\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'Array',\n\t\t\tproperties: properties\n\t\t};\n\t}\n\tparseAssignmentExpression ( left ) {\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'Assignment',\n\t\t\tleft: left,\n\t\t\tright: this.parseExpression()\n\t\t};\n\t}\n\tparseBinaryExpression ( _left, _operator ) {\n\t\t// function argument is like a var..\n\t\t// TODO(Saar) Dont like this hack..\n\t\tlet left = _left;\n\t\tlet operator = _operator;\n\n\t\tif( !operator ) {\n\t\t\tthrow new ParseError('Euh errorrrr');\n\t\t}\n\n\t\tlet right = this.parseToken();\n\n\t\tif( !right ) {\n\t\t\tthrow new ParseError('Invalid token after '+operator.value);\n\t\t}\n\n\t\tlet stack = [left, operator, right];\n\n\t\t/* jshint boss: true */\n\t\tfor ( let operator, node; operator = this.parseOperator(); ) {\n\n\t\t\twhile ( stack.length > 2 && operator.precedence <= stack[stack.length - 2].precedence ) {\n\n\t\t\t\tlet right = stack.pop();\n\t\t\t\tlet operator = stack.pop();\n\t\t\t\tlet left = stack.pop();\n\n\t\t\t\tnode = this.createOperatorExpression(operator.value, left, right);\n\n\t\t\t\tstack.push(node);\n\t\t\t}\n\n\t\t\tnode = this.parseToken();\n\n\t\t\tif( !node ) {\n\t\t\t\tthrow new ParseError('Invalid token after '+operator.value);\n\t\t\t}\n\n\t\t\tstack.push(operator, node);\n\t\t}\n\n\t\tlet i = stack.length - 1;\n\t\tlet node = stack[i];\n\n\t\twhile ( i > 1 ) {\n\n\t\t\tnode = this.createOperatorExpression(stack[i - 1].value, stack[i - 2], node);\n\t\t\ti -= 2;\n\t\t}\n\n\t\treturn node;\n\t}\n\tparseCallable ( node ) {\n\n\t\tlet args = [];\n\n\t\t// TODO(Saar) Code cleanup\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tif( this.current === ')' ) {\n\t\t\tthis.read();\n\t\t\tthis.moveon();\n\t\t} else {\n\t\t\targs = this.parseCallableArguments();\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'Callable',\n\t\t\tcallable: node,\n\t\t\targs: args\n\t\t};\n\t}\n\tparseCallableArguments () {\n\t\tvar args = [],\n\t\t\tnode;\n\n\t\t/* jshint boss: true */\n\t\twhile( node = this.parseExpression() ) {\n\n\t\t\targs.push(node);\n\n\t\t\tif( this.is(',') ) {\n\t\t\t\tthis.read();\n\t\t\t\tthis.moveon();\n\t\t\t}\n\t\t\t// End of callable args\n\t\t\telse if( this.is(')') ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif( !this.is(')') ) {\n\t\t\tthrow new ParseError('Unexpected callable end');\n\t\t}\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\treturn args;\n\t}\n\tparseConditionalExpression (test) {\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tlet consequent = this.parseExpression();\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tlet alternate = this.parseExpression();\n\n\t\treturn {\n\t\t\ttype: 'Conditional',\n\t\t\ttest: test,\n\t\t\tconsequent: consequent,\n\t\t\talternate: alternate\n\t\t};\n\t}\n\tparseIdentifier () {\n\t\tvar value = this.current;\n\n\t\twhile ( this.read() && this.isIdentifierPart() ) {\n\t\t\tvalue += this.current;\n\t\t}\n\n\t\tthis.moveon();\n\n\t\treturn LITERALS.hasOwnProperty(value) ?\n\t\t\t{\n\t\t\t\ttype: 'Literal',\n\t\t\t\tvalue: LITERALS[value]\n\t\t\t} :\n\t\t\t{\n\t\t\t\ttype: 'Identifier',\n\t\t\t\tvalue: value\n\t\t\t};\n\t}\n\t// parseLogicalExpression () {}\n\t// Or group?\n\tparseNested () {\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tlet node = this.parseExpression();\n\n\t\tif( !this.is(')') ) {\n\t\t\tthrow new ParseError('Missing `)`');\n\t\t}\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'Nested',\n\t\t\tvalue: node\n\t\t};\n\t}\n\tparseMemberExpression ( object ) {\n\t\tlet computed = !!this.is('[');\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tlet property = this.parseToken();\n\n\t\tif( computed ) {\n\t\t\tthis.read();\n\t\t\tthis.moveon();\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'Member',\n\t\t\tcomputed: computed,\n\t\t\tobject: object,\n\t\t\tproperty: property\n\t\t};\n\t}\n\tparseOperator () {\n\t\tvar one = this.current,\n\t\t\ttwo = one+this.peek(1),\n\t\t\tthree = two+this.peek(2),\n\t\t\tvalue;\n\n\t\tif( BINARY_OPERATORS.hasOwnProperty(three) ) {\n\t\t\tvalue = three;\n\t\t\tthis.skip(3);\n\t\t}\n\t\telse if ( BINARY_OPERATORS.hasOwnProperty(two) ) {\n\t\t\tvalue = two;\n\t\t\tthis.skip(2);\n\t\t}\n\t\telse if ( BINARY_OPERATORS.hasOwnProperty(one) ) {\n\t\t\tvalue = one;\n\t\t\tthis.skip(1);\n\t\t}\n\n\t\tthis.moveon();\n\n\t\tif( !value ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: value,\n\t\t\tprecedence: BINARY_OPERATORS[value]\n\t\t};\n\t}\n\t/**\n\t * 1, 1.234, 123, -1, -1.234\n\t */\n\tparseNumber () {\n\t\tvar value = this.current;\n\n\t\twhile( this.read() ) {\n\n\t\t\tif( !this.is(IS_NUMBER) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvalue += this.current;\n\t\t}\n\n\t\tif( !value || value === '-' || value === '+' ) {\n\t\t\tthrow new ParseError('Invalid number '+value);\n\t\t}\n\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'Number',\n\t\t\tvalue: parseFloat(value),\n\t\t\traw: value\n\t\t};\n\t}\n\tparseObject () {\n\t\tvar properties = [];\n\t\tvar node;\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\t// console.log(this.current);\n\n\t\t/* jshint boss: true */\n\t\twhile( node = this.parseObjectProperty() ) {\n\n\t\t\tproperties.push(node);\n\n\t\t\tif( this.is(',') ) {\n\t\t\t\tthis.read();\n\t\t\t\tthis.moveon();\n\t\t\t}\n\t\t\t// End of callable args\n\t\t\telse if( this.is('}') ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif( !this.is('}') ) {\n\t\t\tthrow new ParseError('Unexpected callable end');\n\t\t}\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'Object',\n\t\t\tproperties: properties\n\t\t};\n\t}\n\tparseObjectProperty () {\n\t\tlet key = this.parseToken();\n\n\t\tif( !this.is(':') ) {\n\t\t\tthrow new ParseError();\n\t\t}\n\n\t\tthis.read();\n\t\tthis.moveon();\n\n\t\tlet value = this.parseExpression();\n\n\t\treturn {\n\t\t\ttype: 'Property',\n\t\t\tkey,\n\t\t\tvalue\n\t\t};\n\t}\n\tparseString () {\n\t\tvar value = '',\n\t\t\traw = this.current,\n\t\t\tqoute = raw;\n\n\t\twhile ( this.read() ) {\n\n\t\t\traw += this.current;\n\n\t\t\t// Escaped qoutes\n\t\t\tif( this.current === '\\\\' && this.peek() === qoute ) {\n\t\t\t\tvalue += qoute;\n\t\t\t\traw += qoute;\n\t\t\t\tthis.skip(1);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( this.current === qoute ) {\n\t\t\t\tthis.read();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif( !this.current ) {\n\t\t\t\tthrow new ParseError('Could not parse String');\n\t\t\t}\n\n\t\t\tvalue += this.current;\n\t\t}\n\n\t\tthis.moveon();\n\n\t\treturn {\n\t\t\ttype: 'String',\n\t\t\tvalue,\n\t\t\traw\n\t\t};\n\t}\n\tparseUnaryExpression () {\n\t\tlet value = this.current;\n\n\t\tthis.read();\n\n\t\t// -- ++\n\t\tif( this.is('-+') ) {\n\t\t\tvalue += this.current;\n\t\t\tthis.read();\n\t\t}\n\n\t\tif( !this.peek(1) ) {\n\t\t\tthrow new ParseError();\n\t\t}\n\n\t\treturn {\n\t\t\ttype: 'Unary',\n\t\t\toperator: value,\n\t\t\tvalue: this.parseExpression()\n\t\t};\n\t}\n\tparseVariable () {\n\n\t\tvar node = this.parseIdentifier();\n\n\t\t// Member [ or .\n\t\tif( this.is('.[') ) {\n\t\t\treturn this.parseMemberExpression(node);\n\t\t}\n\n\t\t// Callable\n\t\tif( this.is('(') ) {\n\t\t\treturn this.parseCallable(node);\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t// Helpers\n\tisIdentifierStart () {\n\t\tvar chrCode = this.current.charCodeAt(0);\n\n\t\treturn (chrCode === 36) || (chrCode === 95) || // `$` and `_`\n\t\t\t(chrCode >= 65 && chrCode <= 90) || // A...Z\n\t\t\t(chrCode >= 97 && chrCode <= 122); // a...z\n\t}\n\n\tisIdentifierPart () {\n\t\tvar chrCode = this.current.charCodeAt(0);\n\n\t\treturn (chrCode === 36) || (chrCode === 95) || // `$` and `_`\n\t\t\t(chrCode >= 65 && chrCode <= 90) || // A...Z\n\t\t\t(chrCode >= 97 && chrCode <= 122) || // a...z\n\t\t\t(chrCode >= 48 && chrCode <= 57); // 0...9\n\t}\n\n\tcreateOperatorExpression ( operator, left, right ) {\n\t\tlet type = (operator === '||' || operator === '&&') ? 'Logical' : 'Binary';\n\n\t\treturn {\n\t\t\ttype: type,\n\t\t\toperator: operator,\n\t\t\tleft: left,\n\t\t\tright: right\n\t\t};\n\t}\n}\n\nconst parser = new Parser();\n\nfunction parse (expression) {\n\t\n\treturn parser.parse(expression.trim());\n}\n\nfunction ParseError( message ) {\n\n\tthis.name = 'ParseError';\n\tthis.message = message || '';\n\tthis.stack = (new Error()).stack;\n}\n\nParseError.prototype = Object.create(Error.prototype);\n"]}